'From Cuis 3.3 of 2 June 2011 [latest update: #1024] on 5 August 2011 at 11:05:30 pm'!!Encoder methodsFor: 'results' stamp: 'nice 3/31/2011 00:35'!allLiterals	addedSelectorAndMethodClassLiterals ifFalse:		[addedSelectorAndMethodClassLiterals := true.		"Put the optimized selectors in literals so as to browse senders more easily"		optimizedSelectors := optimizedSelectors reject: [:e| literalStream originalContents hasLiteral: e].		optimizedSelectors isEmpty ifFalse: [			"Use one entry per literal if enough room, else make anArray"			literalStream position + optimizedSelectors size + 2 > 255				ifTrue: [self litIndex: optimizedSelectors asArray]				ifFalse: [optimizedSelectors do: [:e | self litIndex: e]]].		"Add a slot for selector or MethodProperties"		self litIndex: nil.		self litIndex: self associationForClass].	^literalStream contents! !!MessageNode methodsFor: 'code generation' stamp: 'nice 3/31/2011 00:24'!sizeCodeForEffect: encoder	special > 0 		ifTrue:			[encoder noteOptimizedSelector: originalSelector.			^self perform: (MacroSizers at: special) with: encoder with: false].	^super sizeCodeForEffect: encoder! !!MessageNode methodsFor: 'code generation' stamp: 'nice 3/31/2011 00:25'!sizeCodeForValue: encoder	| total |	special > 0 		ifTrue: 			[encoder noteOptimizedSelector: originalSelector.			^self perform: (MacroSizers at: special) with: encoder with: true].	receiver == NodeSuper		ifTrue: [selector := selector copy "only necess for splOops"].	total := selector sizeCode: encoder args: arguments size super: receiver == NodeSuper.	receiver == nil 		ifFalse: [total := total + (receiver sizeCodeForValue: encoder)].	sizes := arguments collect: 					[:arg | | argSize | 					argSize := arg sizeCodeForValue: encoder.					total := total + argSize.					argSize].	^total! !Encoder removeSelector: #nTemps:literals:class:!"Postscript:Leave the line above, and replace the rest of this comment by a useful one.Executable statements should follow this comment, and shouldbe separated by periods, with no exclamation points (!!).Be sure to put any further comments in double-quotes, like this one."Compiler recompileAll!