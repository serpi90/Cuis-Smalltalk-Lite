'From Cuis 3.3 of 2 June 2011 [latest update: #1024] on 19 July 2011 at 1:56:12 pm'!!FormCanvas methodsFor: 'drawing-text' stamp: 'jmv 7/19/2011 13:49'!drawString: aString from: firstIndex to: lastIndex in: bounds font: fontOrNil color: c	| font portRect |	port colorMap: nil.	portRect _ port clipRect.	port clipByX1: bounds left + origin x 		y1: bounds top + origin y 		x2: bounds right + origin x 		y2: bounds bottom + origin y.	"Slight optimization when there's nothing to do."	port clipHeight = 0 ifTrue: [port clipRect: portRect. ^self].	port clipWidth = 0 ifTrue: [port clipRect: portRect. ^self].	font _ fontOrNil ifNil: [StrikeFont default].	font installOn: port foregroundColor: (shadowColor ifNil: [ c ]).	font displayString: aString asString on: port 		from: firstIndex to: lastIndex at: (bounds topLeft + origin) kern: font baseKern negated.	port clipRect: portRect! !