'From Cuis 4.0 of 16 November 2011 [latest update: #1144] on 7 December 2011 at 3:52:21 pm'!!TextEditor methodsFor: 'events' stamp: 'jmv 12/7/2011 15:28'!   mouseDown: evt 	| clickPoint b |	initialWordSelStart _ nil.	initialWordSelStop _ nil.	"Multiple selection of text.	Windows uses Control, Mac uses Command (i.e. commandAlt)	On the Mac, command-button1 is translated to command-button3 by the VM. do:		Preferences disable: #commandClickOpensHalo	to disable this behavior and make command-button1 work for multiple selection. "	(evt controlKeyPressed or: [ evt commandAltKeyPressed ]) ifTrue: [		self selectionInterval size > 0 ifTrue: [			selectionStartBlocks _ selectionStartBlocks copyWith: self startBlock.			selectionStopBlocks _ selectionStopBlocks copyWith: self stopBlock ]]	ifFalse: [		selectionStartBlocks _ #().		selectionStopBlocks _ #() ].	clickPoint _ evt position.	b _ paragraph characterBlockAtPoint: clickPoint.	(paragraph clickAt: clickPoint) ifTrue: [		markBlock _ b.		pointBlock _ b.		evt hand releaseKeyboardFocus: self.		^ self ].		evt shiftPressed		ifFalse: [			(self markIndex = b stringIndex and: [ self pointIndex = b stringIndex ])				ifTrue: [					markBlock _ b.					pointBlock _ b ]				ifFalse: [					markBlock _ b.					pointBlock _ b.						self setEmphasisHereFromText ]]! !!TextEditor methodsFor: 'events' stamp: 'jmv 12/7/2011 15:28'!                            mouseUp: evt	| cursorBlock cursorIndex startBlock startIndex stopBlock stopIndex |	evt shiftPressed		ifTrue: [			"Squeak classic behavior for click, move, shift-click sequence "			"pointBlock _(paragraph characterBlockAtPoint: (evt position))."			"Mac behavior"			cursorBlock _ paragraph characterBlockAtPoint: evt position.			cursorIndex _ cursorBlock stringIndex.			startBlock _ self startBlock min: cursorBlock.			startIndex _ startBlock stringIndex.			stopBlock _ self stopBlock max: cursorBlock.			stopIndex _ stopBlock stringIndex.			(stopIndex - cursorIndex) < (cursorIndex - startIndex)				ifTrue: [					markBlock _ startBlock.					pointBlock _ cursorBlock ]				ifFalse: [					markBlock _ stopBlock.					pointBlock _ cursorBlock ]].	self storeSelectionInParagraph! !