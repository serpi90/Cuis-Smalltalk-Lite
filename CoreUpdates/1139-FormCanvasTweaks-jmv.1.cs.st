'From Cuis 3.3 of 2 June 2011 [latest update: #1024] on 14 November 2011 at 7:54:55 pm'!!FormCanvas methodsFor: 'drawing-text' stamp: 'jmv 11/14/2011 19:48'!paragraph: aParagraph bounds: boundsInWorld color: c	| scanner |	self setPaintColor: c.	scanner _ DisplayScanner new 		text: aParagraph paragraphText		foreground: (shadowColor ifNil: [ c ])		ignoreColorChanges: self isShadowDrawing.	scanner setPort: port.	self		display: aParagraph 		using: scanner		in: boundsInWorld! !!FormCanvas methodsFor: 'private - drawing text' stamp: 'jmv 11/14/2011 19:47'!display: aParagraph using: displayScanner in: boundsInWorld	"Send all visible lines to the displayScanner for display"	|  leftInRun line |	leftInRun _ 0.	(aParagraph lineIndexForPoint: 0@0)		to: (aParagraph lineIndexForPoint: boundsInWorld extent)		do: [ :i |			line _ aParagraph lines at: i.			aParagraph displaySelectionInLine: line on: self paragraphTopLeft: boundsInWorld topLeft.			"This is still not really nice... We need to take into account origin here, because the DisplayScanners deals with the port			(i.e. the BitBlt) and not with us. So it won't have access to the origin!!"			leftInRun _ displayScanner displayLine: line paragraphTopLeft: boundsInWorld topLeft + origin leftInRun: leftInRun ]! !